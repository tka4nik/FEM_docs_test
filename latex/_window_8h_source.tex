\hypertarget{_window_8h_source}{}\doxysection{Window.\+h}
\label{_window_8h_source}\index{C:/Projects/FEM/831\_finite\_element\_modeling/GUI/source/GUI/Window.h@{C:/Projects/FEM/831\_finite\_element\_modeling/GUI/source/GUI/Window.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include "{}Axes.h"{}}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}TextLabel.h"{}}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include "{}ErrorHandler.h"{}}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}Shaders/Shader.h"{}}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}GradientScale.h"{}}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <FTGL/FTGL.h>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <ftgl/FTFont.h>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <ftgl/FTGLPolygonFont.h>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}Console.h"{}}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}RenderData.h"{}}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include "{}GradientColors.h"{}}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include "{}glm/vec2.hpp"{}}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include "{}GL/freeglut.h"{}}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include <condition\_variable>}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{comment}{/*}}
\DoxyCodeLine{22 \textcolor{comment}{Обработка ошибок.}}
\DoxyCodeLine{23 \textcolor{comment}{}}
\DoxyCodeLine{24 \textcolor{comment}{Класс Window унаследован от ErrorHandler, то есть в нем есть две очереди из строк ошибок и предупреждений}}
\DoxyCodeLine{25 \textcolor{comment}{Сейчас Window сохраняет только ошибки связанные с тесселяцией. PrepareData каждый шаг эти ошибки и предупреждения извлекает и выводит в консоль.}}
\DoxyCodeLine{26 \textcolor{comment}{В случае возникновения ошибки, пользователю предлагается продолжить моделирование или нет.}}
\DoxyCodeLine{27 \textcolor{comment}{Для реализации этого диалога в Console выставляется флаг m\_dlg\_require = true.}}
\DoxyCodeLine{28 \textcolor{comment}{Если это флаг выставлен функция Input не будет парсить введенную строку, а сохранит ее в m\_dlg\_input.}}
\DoxyCodeLine{29 \textcolor{comment}{Через m\_dlg\_input поток RenderData получает ответ от пользователся (продолжить моделирование или нет).}}
\DoxyCodeLine{30 \textcolor{comment}{*/}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{comment}{//Если CALLBACK не определен, определяем его пустым (нужно для кроссплатформенности)}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#ifndef CALLBACK}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#define CALLBACK}}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{keyword}{namespace }details \{}
\DoxyCodeLine{38     \textcolor{keywordtype}{void} CALLBACK ErrorCallback(GLenum error\_code);}
\DoxyCodeLine{39 \};}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{keyword}{class }\mbox{\hyperlink{class_window}{Window}}: \textcolor{keyword}{public} \mbox{\hyperlink{class_error_handler}{ErrorHandler}} \{}
\DoxyCodeLine{43 \textcolor{keyword}{public}:}
\DoxyCodeLine{48     \textcolor{keyword}{static} \mbox{\hyperlink{class_window}{Window}}* \mbox{\hyperlink{class_window_a3d88ccfd9c67c5b1cf558970d9005997}{Instance}}();}
\DoxyCodeLine{59     \textcolor{keyword}{static} \mbox{\hyperlink{class_window}{Window}}* \mbox{\hyperlink{class_window_a3d88ccfd9c67c5b1cf558970d9005997}{Instance}}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv, glm::vec2 win\_size, glm::vec2 win\_offset, glm::vec2 proj\_rect, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* title);}
\DoxyCodeLine{60 }
\DoxyCodeLine{65     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_window_a87b902697d9b23178d1bf4d0e1fae978}{SetOffset}}(glm::vec2 camera\_offset);}
\DoxyCodeLine{66 }
\DoxyCodeLine{71     glm::vec2 \mbox{\hyperlink{class_window_ab9dc84bac40c574fbd5cad0ddc961e9c}{GetOffset}}()\textcolor{keyword}{const};}
\DoxyCodeLine{72 }
\DoxyCodeLine{76     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_window_ae410ef861ec649b6b8ae08b1c31cbedf}{ResetModelView}}();}
\DoxyCodeLine{77 }
\DoxyCodeLine{81     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_window_a291941e9197e4d74f0f3765c689a35de}{Display}}();}
\DoxyCodeLine{82 }
\DoxyCodeLine{86     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_window_affa9347470520049cf9e32e67fdfe488}{Reshape}}(\textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} h);}
\DoxyCodeLine{87 }
\DoxyCodeLine{91     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_window_a676d03577ab91fad8a3c808dc71dbf05}{MotionFunc}}(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y);}
\DoxyCodeLine{92 }
\DoxyCodeLine{96     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_window_a1fd6fe920ef61e85904460f93dc52574}{Mouse}}(\textcolor{keywordtype}{int} button, \textcolor{keywordtype}{int} state, \textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y);}
\DoxyCodeLine{97 }
\DoxyCodeLine{101     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_window_af8a19591bc86a5aac27cc9adbf38b9f9}{MouseWheel}}(\textcolor{keywordtype}{int} button, \textcolor{keywordtype}{int} dir, \textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y);}
\DoxyCodeLine{105     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_window_aeab471a300076b772032ae9110d5424e}{PassiveMotionFunc}}(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y);}
\DoxyCodeLine{106 }
\DoxyCodeLine{110     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_window_abf99605eefa6e9cd704e5786eac88b1e}{SetCameraBounds}}(glm::vec2 min\_view, glm::vec2 max\_view);}
\DoxyCodeLine{111 }
\DoxyCodeLine{117     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_window_a4474a9bc612b122f14cd080629ee3f3d}{GenToolList}}(std::vector<GLdouble>\&\& vertices);}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 }
\DoxyCodeLine{124     std::condition\_variable\& \mbox{\hyperlink{class_window_af3600bd76ffc530db6a93ca6eab3ca01}{GetCreationCondition}}();}
\DoxyCodeLine{125 }
\DoxyCodeLine{129     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_window_a8799cfb1cb41813efe2d75c522553482}{IsCreated}}();}
\DoxyCodeLine{130 }
\DoxyCodeLine{134     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_window_a39d1bc47d2fe16aa368ab49562c33503}{Idle}}();}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \mbox{\hyperlink{class_window}{\string~Window}}();}
\DoxyCodeLine{137 \textcolor{keyword}{private}:}
\DoxyCodeLine{138 }
\DoxyCodeLine{139     \textcolor{keywordtype}{void} Init(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv, glm::vec2 win\_size, glm::vec2 win\_offset, glm::vec2 proj\_rect, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* title);}
\DoxyCodeLine{140     \mbox{\hyperlink{class_window}{Window}}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv, glm::vec2 win\_size, glm::vec2 win\_offset, glm::vec2 proj\_rect, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* title);}
\DoxyCodeLine{141 }
\DoxyCodeLine{142     \textcolor{keyword}{friend} \textcolor{keywordtype}{void} ForwardingMotionFunc(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y);}
\DoxyCodeLine{143     \textcolor{keyword}{friend} \textcolor{keywordtype}{void} ForwardingMouse(\textcolor{keywordtype}{int} button, \textcolor{keywordtype}{int} state, \textcolor{keywordtype}{int} width, \textcolor{keywordtype}{int} height);}
\DoxyCodeLine{144     \textcolor{keyword}{friend} \textcolor{keywordtype}{void} CALLBACK details::ErrorCallback(GLenum error\_code);}
\DoxyCodeLine{145 }
\DoxyCodeLine{149     \textcolor{keywordtype}{void} ResetProjView();}
\DoxyCodeLine{150 }
\DoxyCodeLine{155     glm::vec2 GetRealCoords(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y);}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 }
\DoxyCodeLine{158     std::thread m\_graphics\_thread; \textcolor{comment}{//графический поток для отрисовки}}
\DoxyCodeLine{159     \textcolor{keyword}{static} \mbox{\hyperlink{class_window}{Window}}* s\_instance; \textcolor{comment}{//для реализации singleton}}
\DoxyCodeLine{160     \textcolor{keyword}{static} std::once\_flag s\_instance\_flag; \textcolor{comment}{//для реализации singleton}}
\DoxyCodeLine{161 }
\DoxyCodeLine{162     glm::vec2 m\_init\_view\_proj; \textcolor{comment}{//начальная область видимости камеры}}
\DoxyCodeLine{163     glm::vec2 m\_current\_view\_proj; \textcolor{comment}{//текущая облать видимости}}
\DoxyCodeLine{164     glm::vec2 m\_camera\_offset = \{ 0,0 \}; \textcolor{comment}{//смещение центра камеры}}
\DoxyCodeLine{165     glm::vec2 m\_min\_view; \textcolor{comment}{//минимальная область видимости}}
\DoxyCodeLine{166     glm::vec2 m\_max\_view; \textcolor{comment}{//максимальная область видимости}}
\DoxyCodeLine{167     GLfloat m\_camera\_sensitivity = 1.1; \textcolor{comment}{//чувствительность приближения камеры}}
\DoxyCodeLine{168     GLfloat m\_zoom = 1; \textcolor{comment}{//текущее приближение камеры.}}
\DoxyCodeLine{169 }
\DoxyCodeLine{170     glm::vec2 m\_start\_pos = \{0,0\}; \textcolor{comment}{//позиция мыши при последнем нажатии левой кнопки мыши}}
\DoxyCodeLine{171     glm::vec2 m\_init\_offset = \{0,0\}; \textcolor{comment}{//смещение камеры на момент последнего нажатия левой кнопки мыши}}
\DoxyCodeLine{172     }
\DoxyCodeLine{173     }
\DoxyCodeLine{174     FTGLPolygonFont m\_font; \textcolor{comment}{//объект шрифта}}
\DoxyCodeLine{175 }
\DoxyCodeLine{176     \mbox{\hyperlink{class_axes}{Axes}} m\_axes; \textcolor{comment}{//объект для отрисовки осей}}
\DoxyCodeLine{177 }
\DoxyCodeLine{178     GLuint m\_width; \textcolor{comment}{//размеры окна}}
\DoxyCodeLine{179     GLuint m\_height;}
\DoxyCodeLine{180     GLfloat m\_measure\_scale = 1; \textcolor{comment}{//текущая единица измерения для осей}}
\DoxyCodeLine{181 }
\DoxyCodeLine{182     \textcolor{keyword}{static} std::condition\_variable m\_is\_created\_cond; \textcolor{comment}{//должна ли она быть статической??}}
\DoxyCodeLine{183     \textcolor{keywordtype}{bool} m\_is\_created = \textcolor{keyword}{false};\textcolor{comment}{//true -\/ если контекст окна сформирован}}
\DoxyCodeLine{184     }
\DoxyCodeLine{185     \textcolor{keywordtype}{bool} m\_is\_info\_required = \textcolor{keyword}{false}; \textcolor{comment}{//поступил запрос на получение информации о меше(пользователь кликнул по мешу)}}
\DoxyCodeLine{186     \textcolor{keywordtype}{bool} m\_is\_info\_source\_found = \textcolor{keyword}{false};\textcolor{comment}{//информация по запросу пользователя получена}}
\DoxyCodeLine{187     glm::vec2 m\_right\_button\_click\_pos;\textcolor{comment}{//позиция при последнем нажатии правой кнопки мыши}}
\DoxyCodeLine{188     \textcolor{keywordtype}{bool} m\_is\_left\_button\_pressed = \textcolor{keyword}{false}; \textcolor{comment}{//была ли нажата левая кнопка мыши}}
\DoxyCodeLine{189 }
\DoxyCodeLine{190     glm::vec2 m\_current\_cursor\_pos; \textcolor{comment}{//текущее положение курсора}}
\DoxyCodeLine{191 }
\DoxyCodeLine{192     \mbox{\hyperlink{class_text_label}{TextLabel}} m\_text\_label; \textcolor{comment}{//текстовое поля для отображения информации}}
\DoxyCodeLine{193     \mbox{\hyperlink{class_text_label}{TextLabel}} m\_info\_node;\textcolor{comment}{//текстовое поля для отображения информации о меше}}
\DoxyCodeLine{194 }
\DoxyCodeLine{195     \mbox{\hyperlink{class_shader}{Shader}}* m\_gradient\_shader;\textcolor{comment}{//Шейдер для градиента}}
\DoxyCodeLine{196 }
\DoxyCodeLine{197     \mbox{\hyperlink{class_gradient_scale}{GradientScale}} m\_gradient\_scale;\textcolor{comment}{//объект для отрисовки шкалы градиента}}
\DoxyCodeLine{198 }
\DoxyCodeLine{199     }
\DoxyCodeLine{200 \};}
\DoxyCodeLine{201 }

\end{DoxyCode}
